/*!
  * vue-i18n-core v12.0.0-alpha.3
  * (c) 2016-present kazuya kawaguchi and contributors
  * Released under the MIT License.
  */
import{computed,watch,getCurrentInstance,ref,shallowRef,effectScope,inject,onMounted,onUnmounted,isRef}from"vue";const inBrowser="undefined"!=typeof window,makeSymbol=(e,n=!1)=>n?Symbol.for(e):Symbol(e),generateFormatCacheKey=(e,n,t)=>friendlyJSONstringify({l:e,k:n,s:t}),friendlyJSONstringify=e=>JSON.stringify(e).replace(/\u2028/g,"\\u2028").replace(/\u2029/g,"\\u2029").replace(/\u0027/g,"\\u0027"),isNumber=e=>"number"==typeof e&&isFinite(e),isRegExp=e=>"[object RegExp]"===toTypeString(e),isEmptyObject=e=>isPlainObject(e)&&0===Object.keys(e).length,assign=Object.assign,_create=Object.create,create=(e=null)=>_create(e);function escapeHtml(e){return e.replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&apos;")}const hasOwnProperty=Object.prototype.hasOwnProperty;function hasOwn(e,n){return hasOwnProperty.call(e,n)}const isArray=Array.isArray,isFunction=e=>"function"==typeof e,isString=e=>"string"==typeof e,isBoolean=e=>"boolean"==typeof e,isObject=e=>null!==e&&"object"==typeof e,isPromise=e=>isObject(e)&&isFunction(e.then)&&isFunction(e.catch),objectToString=Object.prototype.toString,toTypeString=e=>objectToString.call(e),isPlainObject=e=>"[object Object]"===toTypeString(e),toDisplayString=e=>null==e?"":isArray(e)||isPlainObject(e)&&e.toString===objectToString?JSON.stringify(e,null,2):String(e);function join(e,n=""){return e.reduce(((e,t,s)=>0===s?e+t:e+n+t),"")}function warn(e,n){"undefined"!=typeof console&&(console.warn("[intlify] "+e),n&&console.warn(n.stack))}const isNotObjectOrIsArray=e=>!isObject(e)||isArray(e);function deepCopy(e,n){if(isNotObjectOrIsArray(e)||isNotObjectOrIsArray(n))throw new Error("Invalid value");const t=[{src:e,des:n}];for(;t.length;){const{src:e,des:n}=t.pop();Object.keys(e).forEach((s=>{"__proto__"!==s&&(isObject(e[s])&&!isObject(n[s])&&(n[s]=Array.isArray(e[s])?[]:create()),isNotObjectOrIsArray(n[s])||isNotObjectOrIsArray(e[s])?n[s]=e[s]:t.push({src:e[s],des:n[s]}))}))}}const COMPILE_ERROR_CODES_EXTEND_POINT=17;function isMessageAST(e){return isObject(e)&&0===resolveType(e)&&(hasOwn(e,"b")||hasOwn(e,"body"))}const PROPS_BODY=["b","body"],PROPS_CASES=["c","cases"],PROPS_STATIC=["s","static"],PROPS_ITEMS=["i","items"],PROPS_TYPE=["t","type"];function resolveType(e){return resolveProps(e,PROPS_TYPE)}const PROPS_VALUE=["v","value"],PROPS_MODIFIER=["m","modifier"],PROPS_KEY=["k","key"];function resolveProps(e,n,t){for(let s=0;s<n.length;s++){const t=n[s];if(hasOwn(e,t)&&null!=e[t])return e[t]}return t}const AST_NODE_PROPS_KEYS=[...PROPS_BODY,...PROPS_CASES,...PROPS_STATIC,...PROPS_ITEMS,...PROPS_KEY,...PROPS_MODIFIER,...PROPS_VALUE,...PROPS_TYPE],CoreErrorCodes={INVALID_ARGUMENT:17,INVALID_DATE_ARGUMENT:18,INVALID_ISO_DATE_ARGUMENT:19,NOT_SUPPORT_NON_STRING_MESSAGE:20,NOT_SUPPORT_LOCALE_PROMISE_VALUE:21,NOT_SUPPORT_LOCALE_ASYNC_FUNCTION:22,NOT_SUPPORT_LOCALE_TYPE:23},CORE_ERROR_CODES_EXTEND_POINT=24;function getLocale(e,n){return null!=n.locale?resolveLocale(n.locale):resolveLocale(e.locale)}let _resolveLocale;function resolveLocale(e){if(isString(e))return e;if(isFunction(e)){if(e.resolvedOnce&&null!=_resolveLocale)return _resolveLocale;if("Function"===e.constructor.name){const n=e();if(isPromise(n))throw Error(CoreErrorCodes.NOT_SUPPORT_LOCALE_PROMISE_VALUE);return _resolveLocale=n}throw Error(CoreErrorCodes.NOT_SUPPORT_LOCALE_ASYNC_FUNCTION)}throw Error(CoreErrorCodes.NOT_SUPPORT_LOCALE_TYPE)}function fallbackWithSimple(e,n,t){return[...new Set([t,...isArray(n)?n:isObject(n)?Object.keys(n):isString(n)?[n]:[t]])]}function resolveWithKeyValue(e,n){return isObject(e)?e[n]:null}const VERSION$1="12.0.0-alpha.3",NOT_RESOLVED=-1,DEFAULT_LOCALE="en-US",capitalize=e=>`${e.charAt(0).toLocaleUpperCase()}${e.substr(1)}`;function getDefaultLinkedModifiers(){return{upper:(e,n)=>"text"===n&&isString(e)?e.toUpperCase():"vnode"===n&&isObject(e)&&"__v_isVNode"in e?e.children.toUpperCase():e,lower:(e,n)=>"text"===n&&isString(e)?e.toLowerCase():"vnode"===n&&isObject(e)&&"__v_isVNode"in e?e.children.toLowerCase():e,capitalize:(e,n)=>"text"===n&&isString(e)?capitalize(e):"vnode"===n&&isObject(e)&&"__v_isVNode"in e?capitalize(e.children):e}}let _compiler;const setAdditionalMeta=e=>{};let _fallbackContext=null;const setFallbackContext=e=>{_fallbackContext=e},getFallbackContext=()=>_fallbackContext;let _cid=0;function createCoreContext(e={}){const n=isFunction(e.onWarn)?e.onWarn:warn,t=isString(e.version)?e.version:VERSION$1,s=isString(e.locale)||isFunction(e.locale)?e.locale:DEFAULT_LOCALE,a=isFunction(s)?DEFAULT_LOCALE:s,o=isArray(e.fallbackLocale)||isPlainObject(e.fallbackLocale)||isString(e.fallbackLocale)||!1===e.fallbackLocale?e.fallbackLocale:a,l=isPlainObject(e.messages)?e.messages:createResources(a),r=assign(create(),e.modifiers,getDefaultLinkedModifiers()),i=e.pluralRules||create(),c=isFunction(e.missing)?e.missing:null,u=!isBoolean(e.missingWarn)&&!isRegExp(e.missingWarn)||e.missingWarn,g=!isBoolean(e.fallbackWarn)&&!isRegExp(e.fallbackWarn)||e.fallbackWarn,p=!!e.fallbackFormat,f=!!e.unresolving,_=isFunction(e.postTranslation)?e.postTranslation:null,m=isPlainObject(e.processor)?e.processor:null,E=!isBoolean(e.warnHtmlMessage)||e.warnHtmlMessage,b=!!e.escapeParameter,O=isFunction(e.messageCompiler)?e.messageCompiler:_compiler,d=isFunction(e.messageResolver)?e.messageResolver:resolveWithKeyValue,S=isFunction(e.localeFallbacker)?e.localeFallbacker:fallbackWithSimple,P=isObject(e.fallbackContext)?e.fallbackContext:void 0,T=e,L=isObject(T.__meta)?T.__meta:{};_cid++;return{version:t,cid:_cid,locale:s,fallbackLocale:o,messages:l,modifiers:r,pluralRules:i,missing:c,missingWarn:u,fallbackWarn:g,fallbackFormat:p,unresolving:f,postTranslation:_,processor:m,warnHtmlMessage:E,escapeParameter:b,messageCompiler:O,messageResolver:d,localeFallbacker:S,fallbackContext:P,onWarn:n,__meta:L}}const createResources=e=>({[e]:create()});function handleMissing(e,n,t,s,a){const{missing:o,onWarn:l}=e;if(null!==o){const s=o(e,t,n,a);return isString(s)?s:n}return n}function updateFallbackLocale(e,n,t){e.__localeChainCache=new Map,e.localeFallbacker(e,t,n)}function isAlmostSameLocale(e,n){return e!==n&&e.split("-")[0]===n.split("-")[0]}function isImplicitFallback(e,n){const t=n.indexOf(e);if(-1===t)return!1;for(let s=t+1;s<n.length;s++)if(isAlmostSameLocale(e,n[s]))return!0;return!1}const DEFAULT_MODIFIER=e=>e,DEFAULT_MESSAGE=e=>"",DEFAULT_MESSAGE_DATA_TYPE="text",DEFAULT_NORMALIZE=e=>0===e.length?"":join(e),DEFAULT_INTERPOLATE=toDisplayString;function pluralDefault(e,n){return e=Math.abs(e),2===n?e?e>1?1:0:1:e?Math.min(e,2):0}function getPluralIndex(e){const n=isNumber(e.pluralIndex)?e.pluralIndex:-1;return e.named&&(isNumber(e.named.count)||isNumber(e.named.n))?isNumber(e.named.count)?e.named.count:isNumber(e.named.n)?e.named.n:n:n}function normalizeNamed(e,n){n.count||(n.count=e),n.n||(n.n=e)}function createMessageContext(e={}){const n=e.locale,t=getPluralIndex(e),s=isObject(e.pluralRules)&&isString(n)&&isFunction(e.pluralRules[n])?e.pluralRules[n]:pluralDefault,a=isObject(e.pluralRules)&&isString(n)&&isFunction(e.pluralRules[n])?pluralDefault:void 0,o=e.list||[],l=e.named||create();isNumber(e.pluralIndex)&&normalizeNamed(t,l);function r(n,t){const s=isFunction(e.messages)?e.messages(n,!!t):!!isObject(e.messages)&&e.messages[n];return s||(e.parent?e.parent.message(n):DEFAULT_MESSAGE)}const i=isPlainObject(e.processor)&&isFunction(e.processor.normalize)?e.processor.normalize:DEFAULT_NORMALIZE,c=isPlainObject(e.processor)&&isFunction(e.processor.interpolate)?e.processor.interpolate:DEFAULT_INTERPOLATE,u={list:e=>o[e],named:e=>l[e],plural:e=>e[s(t,e.length,a)],linked:(n,...t)=>{const[s,a]=t;let o="text",l="";1===t.length?isObject(s)?(l=s.modifier||l,o=s.type||o):isString(s)&&(l=s||l):2===t.length&&(isString(s)&&(l=s||l),isString(a)&&(o=a||o));const i=r(n,!0)(u),c="vnode"===o&&isArray(i)&&l?i[0]:i;return l?(g=l,e.modifiers?e.modifiers[g]:DEFAULT_MODIFIER)(c,o):c;var g},message:r,type:isPlainObject(e.processor)&&isString(e.processor.type)?e.processor.type:DEFAULT_MESSAGE_DATA_TYPE,interpolate:c,normalize:i,values:assign(create(),o,l)};return u}const NOOP_MESSAGE_FUNCTION=()=>"",isMessageFunction=e=>isFunction(e);function translate(e,...n){const{fallbackFormat:t,postTranslation:s,unresolving:a,messageCompiler:o,fallbackLocale:l,messages:r}=e,[i,c]=parseTranslateArgs(...n),u=isBoolean(c.missingWarn)?c.missingWarn:e.missingWarn,g=isBoolean(c.fallbackWarn)?c.fallbackWarn:e.fallbackWarn,p=isBoolean(c.escapeParameter)?c.escapeParameter:e.escapeParameter,f=!!c.resolvedMessage,_=isString(c.default)||isBoolean(c.default)?isBoolean(c.default)?o?i:()=>i:c.default:t?o?i:()=>i:null,m=t||null!=_&&(isString(_)||isFunction(_)),E=getLocale(e,c);p&&escapeParams(c);let[b,O,d]=f?[i,E,r[E]||create()]:resolveMessageFormat(e,i,E,l,g,u),S=b,P=i;if(f||isString(S)||isMessageAST(S)||isMessageFunction(S)||m&&(S=_,P=S),!(f||(isString(S)||isMessageAST(S)||isMessageFunction(S))&&isString(O)))return a?NOT_RESOLVED:i;let T=!1;const L=isMessageFunction(S)?S:compileMessageFormat(e,i,O,S,P,(()=>{T=!0}));if(T)return S;const C=evaluateMessage(e,L,createMessageContext(getMessageContextOptions(e,O,d,c)));return s?s(C,i):C}function escapeParams(e){isArray(e.list)?e.list=e.list.map((e=>isString(e)?escapeHtml(e):e)):isObject(e.named)&&Object.keys(e.named).forEach((n=>{isString(e.named[n])&&(e.named[n]=escapeHtml(e.named[n]))}))}function resolveMessageFormat(e,n,t,s,a,o){const{messages:l,onWarn:r,messageResolver:i,localeFallbacker:c}=e,u=c(e,s,t);let g,p=create(),f=null;for(let _=0;_<u.length&&(g=u[_],p=l[g]||create(),null===(f=i(p,n))&&(f=p[n]),!(isString(f)||isMessageAST(f)||isMessageFunction(f)));_++)if(!isImplicitFallback(g,u)){const t=handleMissing(e,n,g,o,"translate");t!==n&&(f=t)}return[f,g,p]}function compileMessageFormat(e,n,t,s,a,o){const{messageCompiler:l,warnHtmlMessage:r}=e;if(isMessageFunction(s)){const e=s;return e.locale=e.locale||t,e.key=e.key||n,e}if(null==l){const e=()=>s;return e.locale=t,e.key=n,e}const i=l(s,getCompileContext(e,t,a,s,r,o));return i.locale=t,i.key=n,i.source=s,i}function evaluateMessage(e,n,t){return n(t)}function parseTranslateArgs(...e){const[n,t,s]=e,a=create();if(!(isString(n)||isNumber(n)||isMessageFunction(n)||isMessageAST(n)))throw Error(CoreErrorCodes.INVALID_ARGUMENT);const o=isNumber(n)?String(n):(isMessageFunction(n),n);return isNumber(t)?a.plural=t:isString(t)?a.default=t:isPlainObject(t)&&!isEmptyObject(t)?a.named=t:isArray(t)&&(a.list=t),isNumber(s)?a.plural=s:isString(s)?a.default=s:isPlainObject(s)&&assign(a,s),[o,a]}function getCompileContext(e,n,t,s,a,o){return{locale:n,key:t,warnHtmlMessage:a,onError:e=>{throw o&&o(e),e},onCacheKey:e=>generateFormatCacheKey(n,t,e)}}function getMessageContextOptions(e,n,t,s){const{modifiers:a,pluralRules:o,messageResolver:l,fallbackLocale:r,fallbackWarn:i,missingWarn:c,fallbackContext:u}=e,g={locale:n,modifiers:a,pluralRules:o,messages:(s,a)=>{let o=l(t,s);if(null==o&&(u||a)){const[,,t]=resolveMessageFormat(u||e,s,n,r,i,c);o=l(t,s)}if(isString(o)||isMessageAST(o)){let t=!1;const a=compileMessageFormat(e,s,n,o,s,(()=>{t=!0}));return t?NOOP_MESSAGE_FUNCTION:a}return isMessageFunction(o)?o:NOOP_MESSAGE_FUNCTION}};return e.processor&&(g.processor=e.processor),s.list&&(g.list=s.list),s.named&&(g.named=s.named),isNumber(s.plural)&&(g.pluralIndex=s.plural),g}const I18nErrorCodes={UNEXPECTED_RETURN_TYPE:24,INVALID_ARGUMENT:25,MUST_BE_CALL_SETUP_TOP:26,NOT_INSTALLED:27,REQUIRED_VALUE:28,INVALID_VALUE:29,CANNOT_SETUP_VUE_DEVTOOLS_PLUGIN:30,NOT_INSTALLED_WITH_PROVIDE:31,UNEXPECTED_ERROR:32,DUPLICATE_USE_I18N_CALLING:33},VERSION="12.0.0-alpha.3";function initFeatureFlags(){}function initDev(){console.info("You are running a development build of vue-i18n.\nMake sure to use the production build (*.prod.js) when deploying for production.")}const SetPluralRulesSymbol=makeSymbol("__setPluralRules"),DisposeSymbol=makeSymbol("__dispose");function handleFlatJson(e){if(!isObject(e))return e;if(isMessageAST(e))return e;for(const n in e)if(hasOwn(e,n))if(n.includes(".")){const t=n.split("."),s=t.length-1;let a=e,o=!1;for(let e=0;e<s;e++){if("__proto__"===t[e])throw new Error(`unsafe key: ${t[e]}`);if(t[e]in a||(a[t[e]]=create()),!isObject(a[t[e]])){o=!0;break}a=a[t[e]]}if(o||(isMessageAST(a)?AST_NODE_PROPS_KEYS.includes(t[s])||delete e[n]:(a[t[s]]=e[n],delete e[n])),!isMessageAST(a)){const e=a[t[s]];isObject(e)&&handleFlatJson(e)}}else isObject(e[n])&&handleFlatJson(e[n]);return e}function getLocaleMessages(e,n){const{messages:t,__i18n:s,messageResolver:a,flatJson:o}=n,l=isPlainObject(t)?t:isArray(s)?create():{[e]:create()};if(isArray(s)&&s.forEach((e=>{if("locale"in e&&"resource"in e){const{locale:n,resource:t}=e;n?(l[n]=l[n]||create(),deepCopy(t,l[n])):deepCopy(t,l)}else isString(e)&&deepCopy(JSON.parse(e),l)})),null==a&&o)for(const r in l)hasOwn(l,r)&&handleFlatJson(l[r]);return l}function getComponentOptions(e){return e.type}function adjustI18nResources(e,n,t){let s=isObject(n.messages)?n.messages:create();"__i18nGlobal"in t&&(s=getLocaleMessages(e.locale.value,{messages:s,__i18n:t.__i18nGlobal}));const a=Object.keys(s);a.length&&a.forEach((n=>{e.mergeLocaleMessage(n,s[n])}))}const DEVTOOLS_META="__INTLIFY_META__";let composerID=0;function defineCoreMissingHandler(e){return(n,t,s,a)=>e(t,s,getCurrentInstance()||void 0,a)}const getMetaInfo=()=>{const e=getCurrentInstance();let n=null;return e&&(n=getComponentOptions(e)[DEVTOOLS_META])?{[DEVTOOLS_META]:n}:null};function createComposer(e={}){const{__root:n,__injectWithOption:t}=e,s=void 0===n,a=e.flatJson,o=inBrowser?ref:shallowRef;let l=!isBoolean(e.inheritLocale)||e.inheritLocale;const r=o(n&&l?n.locale.value:isString(e.locale)?e.locale:DEFAULT_LOCALE),i=o(n&&l?n.fallbackLocale.value:isString(e.fallbackLocale)||isArray(e.fallbackLocale)||isPlainObject(e.fallbackLocale)||!1===e.fallbackLocale?e.fallbackLocale:r.value),c=o(getLocaleMessages(r.value,e));let u=n?n.missingWarn:!isBoolean(e.missingWarn)&&!isRegExp(e.missingWarn)||e.missingWarn,g=n?n.fallbackWarn:!isBoolean(e.fallbackWarn)&&!isRegExp(e.fallbackWarn)||e.fallbackWarn,p=n?n.fallbackRoot:!isBoolean(e.fallbackRoot)||e.fallbackRoot,f=!!e.fallbackFormat,_=isFunction(e.missing)?e.missing:null,m=isFunction(e.missing)?defineCoreMissingHandler(e.missing):null,E=isFunction(e.postTranslation)?e.postTranslation:null,b=n?n.warnHtmlMessage:!isBoolean(e.warnHtmlMessage)||e.warnHtmlMessage,O=!!e.escapeParameter;const d=n?n.modifiers:isPlainObject(e.modifiers)?e.modifiers:{};let S,P=e.pluralRules||n&&n.pluralRules;S=(()=>{s&&setFallbackContext(null);const n=createCoreContext({version:VERSION,locale:r.value,fallbackLocale:i.value,messages:c.value,modifiers:d,pluralRules:P,missing:null===m?void 0:m,missingWarn:u,fallbackWarn:g,fallbackFormat:f,unresolving:!0,postTranslation:null===E?void 0:E,warnHtmlMessage:b,escapeParameter:O,messageResolver:e.messageResolver,messageCompiler:e.messageCompiler,__meta:{framework:"vue"}});return s&&setFallbackContext(n),n})(),updateFallbackLocale(S,r.value,i.value);const T=computed({get:()=>r.value,set:e=>{S.locale=e,r.value=e}}),L=computed({get:()=>i.value,set:e=>{S.fallbackLocale=e,i.value=e,updateFallbackLocale(S,r.value,e)}}),C=computed((()=>c.value)),R=computed((()=>Object.keys(c.value).sort()));const I=(e,t,a,o,l,u)=>{let g;r.value,i.value,c.value;try{0,s||(S.fallbackContext=n?getFallbackContext():void 0),g=e(S)}finally{s||(S.fallbackContext=void 0)}if(isNumber(g)&&g===NOT_RESOLVED||"translate exists"===a){const[e,s]=t();return n&&p?o(n):l(e)}if(u(g))return g;throw Error(I18nErrorCodes.UNEXPECTED_RETURN_TYPE)};composerID++,n&&inBrowser&&(watch(n.locale,(e=>{l&&(r.value=e,S.locale=e,updateFallbackLocale(S,r.value,i.value))})),watch(n.fallbackLocale,(e=>{l&&(i.value=e,S.fallbackLocale=e,updateFallbackLocale(S,r.value,i.value))})));const A={id:composerID,locale:T,fallbackLocale:L,get inheritLocale(){return l},set inheritLocale(e){l=e,e&&n&&(r.value=n.locale.value,i.value=n.fallbackLocale.value,updateFallbackLocale(S,r.value,i.value))},availableLocales:R,messages:C,get modifiers(){return d},get pluralRules(){return P||{}},get isGlobal(){return s},get missingWarn(){return u},set missingWarn(e){u=e,S.missingWarn=u},get fallbackWarn(){return g},set fallbackWarn(e){g=e,S.fallbackWarn=g},get fallbackRoot(){return p},set fallbackRoot(e){p=e},get fallbackFormat(){return f},set fallbackFormat(e){f=e,S.fallbackFormat=f},get warnHtmlMessage(){return b},set warnHtmlMessage(e){b=e,S.warnHtmlMessage=e},get escapeParameter(){return O},set escapeParameter(e){O=e,S.escapeParameter=e},t:function(...e){return I((n=>Reflect.apply(translate,null,[n,...e])),(()=>parseTranslateArgs(...e)),"translate",(n=>Reflect.apply(n.t,n,[...e])),(e=>e),(e=>isString(e)))},getLocaleMessage:function(e){return c.value[e]||{}},setLocaleMessage:function(e,n){if(a){const t={[e]:n};for(const e in t)hasOwn(t,e)&&handleFlatJson(t[e]);n=t[e]}c.value[e]=n,S.messages=c.value},mergeLocaleMessage:function(e,n){c.value[e]=c.value[e]||{};const t={[e]:n};if(a)for(const s in t)hasOwn(t,s)&&handleFlatJson(t[s]);deepCopy(n=t[e],c.value[e]),S.messages=c.value},getPostTranslationHandler:function(){return isFunction(E)?E:null},setPostTranslationHandler:function(e){E=e,S.postTranslation=e},getMissingHandler:function(){return _},setMissingHandler:function(e){null!==e&&(m=defineCoreMissingHandler(e)),_=e,S.missing=m},[SetPluralRulesSymbol]:function(e){P=e,S.pluralRules=P}};return A}const I18nInjectionKey=makeSymbol("global-vue-i18n");function createI18n(e={}){const n=!isBoolean(e.globalInjection)||e.globalInjection,t=new Map,[s,a]=createGlobal(e),o=makeSymbol("");const l={async install(e,...t){if(e.__VUE_I18N_SYMBOL__=o,e.provide(e.__VUE_I18N_SYMBOL__,l),isPlainObject(t[0])){const e=t[0];l.__composerExtend=e.__composerExtend}let s=null;n&&(s=injectGlobalFields(e,l.global));const a=e.unmount;e.unmount=()=>{s&&s(),l.dispose(),a()}},get global(){return a},dispose(){s.stop()},__instances:t,__getInstance:function(e){return t.get(e)||null},__setInstance:function(e,n){t.set(e,n)},__deleteInstance:function(e){t.delete(e)}};return l}function useI18n(e={}){const n=getCurrentInstance();if(null==n)throw Error(I18nErrorCodes.MUST_BE_CALL_SETUP_TOP);if(!n.isCE&&null!=n.appContext.app&&!n.appContext.app.__VUE_I18N_SYMBOL__)throw Error(I18nErrorCodes.NOT_INSTALLED);const t=getI18nInstance(n),s=getGlobalComposer(t),a=getComponentOptions(n),o=getScope(e,a);if("global"===o)return adjustI18nResources(s,e,a),s;if("parent"===o){let a=getComposer(t,n,e.__useComponent);return null==a&&(a=s),a}const l=t;let r=l.__getInstance(n);if(null==r){const t=assign({},e);"__i18n"in a&&(t.__i18n=a.__i18n),s&&(t.__root=s),r=createComposer(t),l.__composerExtend&&(r[DisposeSymbol]=l.__composerExtend(r)),setupLifeCycle(l,n,r),l.__setInstance(n,r)}return r}function createGlobal(e){const n=effectScope(),t=n.run((()=>createComposer(e)));if(null==t)throw Error(I18nErrorCodes.UNEXPECTED_ERROR);return[n,t]}function getI18nInstance(e){const n=inject(e.isCE?I18nInjectionKey:e.appContext.app.__VUE_I18N_SYMBOL__);if(!n)throw Error(e.isCE?I18nErrorCodes.NOT_INSTALLED_WITH_PROVIDE:I18nErrorCodes.UNEXPECTED_ERROR);return n}function getScope(e,n){return isEmptyObject(e)?"__i18n"in n?"local":"global":e.useScope?e.useScope:"local"}function getGlobalComposer(e){return e.global}function getComposer(e,n,t=!1){let s=null;const a=n.root;let o=getParentComponentInstance(n,t);for(;null!=o;){if(s=e.__getInstance(o),null!=s)break;if(a===o)break;o=o.parent}return s}function getParentComponentInstance(e,n=!1){return null==e?null:n&&e.vnode.ctx||e.parent}function setupLifeCycle(e,n,t){onMounted((()=>{}),n),onUnmounted((()=>{const s=t;e.__deleteInstance(n);const a=s[DisposeSymbol];a&&(a(),delete s[DisposeSymbol])}),n)}const globalExportProps=["locale","fallbackLocale","availableLocales"],globalExportMethods=["t"];function injectGlobalFields(e,n){const t=Object.create(null);globalExportProps.forEach((e=>{const s=Object.getOwnPropertyDescriptor(n,e);if(!s)throw Error(I18nErrorCodes.UNEXPECTED_ERROR);const a=isRef(s.value)?{get:()=>s.value.value,set(e){s.value.value=e}}:{get:()=>s.get&&s.get()};Object.defineProperty(t,e,a)})),e.config.globalProperties.$i18n=t,globalExportMethods.forEach((t=>{const s=Object.getOwnPropertyDescriptor(n,t);if(!s||!s.value)throw Error(I18nErrorCodes.UNEXPECTED_ERROR);Object.defineProperty(e.config.globalProperties,`$${t}`,s)}));return()=>{delete e.config.globalProperties.$i18n,globalExportMethods.forEach((n=>{delete e.config.globalProperties[`$${n}`]}))}}export{VERSION,createI18n,initDev,initFeatureFlags,useI18n};
